<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S1000D XML Modül Üretici</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f8f9fa;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 50px;
        }

        .header {
            margin-bottom: 25px;
            padding: 15px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 12px;
        }


        .header h1 {
            color: #1e293b;
            font-size: 2.4em;
            margin: 0;
            font-weight: 600;
            text-align: center;
            letter-spacing: -0.3px;
            font-family: 'Segoe UI', 'Roboto', sans-serif;
        }

        .header p {
            color: #64748b;
            font-size: 1.05em;
            margin: 8px 0 0 0;
            text-align: center;
            line-height: 1.5;
            max-width: 600px;
            font-weight: 400;
        }

        .upload-area {
            border: 2px dashed #3498db;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: #f8f9fa;
        }

        .upload-area:hover {
            border-color: #2980b9;
            background: #e3f2fd;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.2);
        }

        .upload-area.dragover {
            border-color: #27ae60;
            background: #e8f5e8;
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 2.5em;
            color: #3498db;
            margin-bottom: 12px;
        }

        .upload-text {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .upload-subtext {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .upload-button {
            margin-top: 15px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            height: 48px;
            width: 300px;
            box-sizing: border-box;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .btn-primary {
            background: #2E86DE;
            color: white;
        }

        .btn-primary:hover {
            background: #1B4F72;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 134, 222, 0.3);
        }

        .btn-convert {
            background: #2E86DE;
            color: white;
        }

        .btn-convert:hover:not(:disabled) {
            background: #1B4F72;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(46, 134, 222, 0.3);
        }

        .btn-download {
            background: #28a745;
            color: white;
        }

        .btn-download:hover:not(:disabled) {
            background: #1e7e34;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .btn-icon {
            font-size: 1.1em;
        }

        .file-input {
            position: absolute;
            left: -9999px;
            opacity: 0;
            pointer-events: none;
        }

        .help-section {
            margin-top: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .help-section h5 {
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-size: 1em;
        }

        .help-section ul {
            margin: 0;
            padding-left: 20px;
            color: #7f8c8d;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .help-section li {
            margin-bottom: 6px;
        }

        /* Yeni Basit Tasarım */
        .main-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .upload-section {
            text-align: center;
            margin-bottom: 30px;
        }

        .upload-area {
            border: 2px dashed #6c757d;
            border-radius: 12px;
            padding: 50px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            margin-bottom: 20px;
        }

        .upload-area:hover {
            border-color: #007bff;
            background: #e3f2fd;
        }

        .upload-area.dragover {
            border-color: #28a745;
            background: #e8f5e8;
        }

                .upload-icon {
                    margin-bottom: 15px;
                    color: #6c757d;
                }

        .upload-text {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .upload-subtext {
            color: #6c757d;
            font-size: 0.9em;
            margin-bottom: 25px;
        }

        .upload-button {
            margin-top: 20px;
        }

        .file-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            gap: 15px;
        }

        .file-details {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }

        .file-status {
            font-size: 0.9em;
            color: #28a745;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .file-name {
            font-weight: 600;
            color: #2c3e50;
            word-break: break-all;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
        }

        .file-size {
            color: #6c757d;
            font-size: 0.9em;
        }

        .convert-section {
            margin: 30px 0;
            display: flex;
            justify-content: center;
        }
        
        .upload-button {
            display: flex;
            justify-content: center;
        }


        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover:not(:disabled) {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
            box-shadow: none;
        }

        .results-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
        }

        .success-message {
            text-align: center;
            margin-bottom: 30px;
        }

        .success-icon {
            margin-bottom: 15px;
        }

        .success-message h3 {
            color: #28a745;
            margin: 0;
            font-size: 1.5em;
        }

        .results-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .result-item:last-child {
            margin-bottom: 0;
        }

        .result-label {
            color: #2c3e50;
            font-weight: 500;
        }

        .result-value {
            color: #007bff;
            font-weight: 600;
            background: white;
            padding: 4px 12px;
            border-radius: 4px;
        }

        .sample-modules {
            margin-bottom: 30px;
        }

        .sample-modules h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .modules-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
        }

        .module-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .module-item:last-child {
            border-bottom: none;
        }

        .module-name {
            font-family: 'Courier New', monospace;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .module-size {
            color: #6c757d;
            font-size: 0.8em;
        }

        .download-section {
            text-align: center;
            margin-top: 30px;
        }

        .download-status {
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: #28a745;
            font-weight: 500;
        }

        .download-icon {
            font-size: 1.2em;
        }

        .file-status {
            color: #28a745;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .extra-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-1px);
        }

        /* Modal Styles */
        .xml-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            background: #f8f9fa;
        }

        .modal-header h3 {
            margin: 0;
            color: #2c3e50;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6c757d;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: #dc3545;
        }

        .modal-body {
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        .modal-body pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            font-size: 12px;
            line-height: 1.4;
            color: #2c3e50;
            overflow-x: auto;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #e9ecef;
            text-align: right;
            background: #f8f9fa;
        }




        .result-area {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .result-success {
            background: #d5f4e6;
            border-left: 5px solid #27ae60;
        }

        .result-error {
            background: #fadbd8;
            border-left: 5px solid #e74c3c;
        }

        .result-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .result-success .result-title {
            color: #27ae60;
        }

        .result-error .result-title {
            color: #e74c3c;
        }

        .xml-preview {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
            margin: 15px 0;
            white-space: pre-wrap;
        }

        .download-btn {
            background: linear-gradient(135deg, #27ae60, #229954);
            margin-top: 15px;
        }

        .download-btn:hover {
            box-shadow: 0 10px 20px rgba(39, 174, 96, 0.3);
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .feature {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .feature h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .feature p {
            color: #7f8c8d;
            font-size: 0.9em;
        }

        /* Yeni UI Bileşenleri */
        .progress-steps {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            gap: 20px;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            opacity: 0.6;
            cursor: default;
            position: relative;
        }

        .step.clickable {
            cursor: pointer;
        }

        .step.clickable:hover {
            opacity: 0.8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .step.active {
            background: #3498db;
            color: white;
            opacity: 1;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .step.completed {
            background: #27ae60;
            color: white;
            opacity: 1;
        }

        .step-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: white;
            color: #3498db;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 6px;
            transition: all 0.3s ease;
        }

        .step.active .step-number {
            background: white;
            color: #3498db;
            transform: scale(1.1);
        }

        .step.completed .step-number {
            background: white;
            color: #27ae60;
        }

        .step-title {
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .step-description {
            font-size: 0.75em;
            opacity: 0.8;
            text-align: center;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 25px;
            margin-top: 30px;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
            overflow: hidden;
        }

        .card-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-header h3 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.3em;
        }

        .card-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-badge {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .card-body {
            padding: 20px;
        }

        .file-list {
            margin-top: 20px;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid #e9ecef;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .file-details {
            font-size: 0.9em;
            color: #7f8c8d;
        }

        .file-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            padding: 8px 12px;
            font-size: 0.85em;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #dc3545;
            color: white;
            width: 40px;
            height: 40px;
            flex-shrink: 0;
            box-sizing: border-box;
        }

        .btn-small:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .btn-small.btn-danger {
            background: #dc3545;
        }

        .btn-small.btn-danger:hover {
            background: #c82333;
        }

        .btn-small.btn-success {
            background: #28a745;
        }

        .btn-small.btn-success:hover {
            background: #218838;
        }

        .btn-small.btn-primary {
            background: #007bff;
        }

        .btn-small.btn-primary:hover {
            background: #0056b3;
        }

        .page-selection {
            margin-top: 20px;
        }

        .selection-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .page-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .page-item {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #6c757d;
        }

        .page-item:hover {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .page-item.selected {
            background: #3498db;
            border-color: #2980b9;
            color: white;
        }

        .selected-info {
            text-align: center;
            margin-top: 15px;
            padding: 10px;
            background: #e8f5e8;
            border-radius: 8px;
            color: #27ae60;
            font-weight: 600;
        }

        .preview-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .pdf-preview {
            min-height: 400px;
            border: 2px dashed #e9ecef;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
        }

        .preview-placeholder {
            text-align: center;
            color: #6c757d;
        }

        .preview-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .conversion-info {
            margin-bottom: 20px;
        }

        .conversion-stats {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stat-item:last-child {
            margin-bottom: 0;
        }

        .stat-label {
            color: #2c3e50;
            font-weight: 500;
        }

        .stat-value {
            color: #3498db;
            font-weight: 600;
            background: white;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .download-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .results-summary {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #27ae60;
        }

        .xml-preview {
            background: #2c3e50;
            color: #ecf0f1;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
        }

        .xml-preview pre {
            margin: 0;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            white-space: pre-wrap;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .loading-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .loading-content h3 {
            margin: 20px 0 10px 0;
            color: #2c3e50;
        }

        .loading-content p {
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2980b9);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 0;
            z-index: 1001;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            min-width: 300px;
            border-left: 4px solid #3498db;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-error {
            border-left-color: #e74c3c;
        }

        .notification-success {
            border-left-color: #27ae60;
        }

        .notification-content {
            display: flex;
            align-items: center;
            padding: 15px;
            gap: 10px;
        }

        .notification-icon {
            font-size: 1.2em;
        }

        .notification-message {
            flex: 1;
            color: #2c3e50;
            font-weight: 500;
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-steps {
                flex-direction: column;
                gap: 10px;
            }
            
            .step {
                flex-direction: row;
                text-align: left;
            }
            
            .step-number {
                margin-right: 15px;
                margin-bottom: 0;
            }

            .notification {
                right: 10px;
                left: 10px;
                min-width: auto;
            }
        }

        /* Modül Listesi Stilleri */
        .modules-list {
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .modules-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .modules-header h3 {
            color: #2c3e50;
            font-size: 1.4em;
            margin: 0;
        }

        .search-box {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-box input,
        .search-box select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.9em;
        }

        .search-box input {
            min-width: 200px;
        }

        .modules-table {
            overflow-x: auto;
        }

        .modules-table table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        .modules-table th,
        .modules-table td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .modules-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
        }

        .modules-table tr:hover {
            background: #f8f9fa;
        }

        .module-filename {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #2980b9;
        }

        .module-title {
            font-weight: 600;
            color: #2c3e50;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .applicability-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 500;
            white-space: nowrap;
        }

        .applicability-general { background: #ecf0f1; color: #2c3e50; }
        .applicability-f16a { background: #e8f5e8; color: #27ae60; }
        .applicability-f16c { background: #e3f2fd; color: #1976d2; }
        .applicability-all { background: #fff3e0; color: #f57c00; }

        .source-pages {
            font-family: 'Courier New', monospace;
            color: #7f8c8d;
            font-size: 0.8em;
        }

        .graphics-indicator {
            text-align: center;
        }

        .graphics-yes { color: #27ae60; }
        .graphics-no { color: #95a5a6; }

        .content-preview {
            max-width: 250px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            font-size: 0.8em;
            color: #7f8c8d;
            cursor: pointer;
        }

        .content-preview:hover {
            color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <div class="header-content">
                <div class="header-text">
                    <h1>S1000D XML Modül Üretici</h1>
                    <p>Teknik dokümanlarınızı S1000D standardına uygun XML modüllerine dönüştürün</p>
                </div>
            </div>
        </div>

        <!-- Main Upload Area -->
        <div class="main-card">
            <!-- 1. PDF Yükleme Alanı -->
            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="fileInput" accept=".pdf,application/pdf" style="display: none;">
                    <div class="upload-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14 2H6C4.89 2 4 2.89 4 4V20C4 21.11 4.89 22 6 22H18C19.11 22 20 21.11 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 13H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M16 17H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="upload-text">PDF dosyanızı buraya sürükleyin</div>
                    <div class="upload-subtext">veya dosya seçmek için tıklayın</div>
                    <div class="upload-button">
                        <button class="btn btn-primary" id="uploadBtn" onclick="selectFile()">
                            <span class="btn-icon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M17 8L12 3L7 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <span id="uploadBtnText">PDF Yükle</span>
                        </button>
                    </div>
                </div>
                
                <!-- Dosya Bilgisi -->
                <div class="file-info" id="fileInfo" style="display: none;">
                    <div class="file-details">
                        <div class="file-status">Seçilen dosya:</div>
                        <div class="file-name" id="fileName"></div>
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="removeFile()">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 6H5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- 2. Dönüştürme Butonu -->
            <div class="convert-section">
                <button class="btn btn-convert" id="convertBtn" onclick="convertPDF()" disabled>
                    <span class="btn-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    XML Modülleri Oluştur
                </button>
            </div>

            <!-- 3. Sonuçlar Bölümü -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="success-message">
                    <div class="success-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.7088 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2458 3.61096 17.4371C2.43727 15.6283 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <h3>Dönüştürme Başarılı</h3>
                </div>
                
                <div class="results-info">
                    <div class="result-item">
                        <span class="result-label">Toplam modül sayısı:</span>
                        <span class="result-value" id="moduleCount">0</span>
                    </div>
                </div>

                <div class="sample-modules">
                    <h4>Örnek çıktı isimleri:</h4>
                    <div class="modules-list" id="modulesList">
                        <!-- Modules will be populated here -->
                    </div>
                </div>

                <div class="download-section">
                    <button class="btn btn-download btn-large" id="downloadBtn" onclick="downloadAll()">
                        <span class="btn-icon">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        Tüm Modülleri İndir
                    </button>
                    <div class="download-status" id="downloadStatus" style="display: none;">
                        <span class="download-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.7088 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2458 3.61096 17.4371C2.43727 15.6283 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        <span class="download-text">İndirme tamamlandı.</span>
                    </div>
                </div>

                <!-- Ekstra Butonlar -->
                <div class="extra-buttons">
                    <button class="btn btn-secondary" onclick="resetProcess()">
                        <span class="btn-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        Yeni PDF
                    </button>
                    <button class="btn btn-secondary" onclick="showSampleXML()">
                        <span class="btn-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                        Örnek XML
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-content">
                <div class="spinner"></div>
                        <h3 id="loadingTitle">XML dosyaları oluşturuluyor, lütfen bekleyin...</h3>
                <p id="loadingMessage">PDF analiz ediliyor ve S1000D modülleri üretiliyor...</p>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let uploadedFile = null;
        let allModules = [];
        let uploadArea, fileInput, fileInfo, fileName, convertBtn, resultsSection, moduleCount, modulesList, downloadStatus, loadingOverlay, progressFill;

        // Conversion Functions
        function convertPDF() {
            if (!uploadedFile) {
                showNotification('Önce bir PDF dosyası yükleyin!', 'error');
                return;
            }

            showLoading();
            
            const formData = new FormData();
            formData.append('file', uploadedFile);
            
            fetch('/convert', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                hideLoading();
                if (data.success) {
                    showNotification('Dönüştürme başarılı!', 'success');
                    displayResults(data);
                } else {
                    showNotification(data.error || 'Dönüştürme hatası!', 'error');
                }
            })
            .catch(error => {
                hideLoading();
                showNotification('Sunucu hatası: ' + error.message, 'error');
                console.error('Conversion error:', error);
            });
        }

        function displayResults(data) {
            // Update result values
            moduleCount.textContent = `${data.module_count || 0} XML modülü oluşturuldu`;
            
            // Display sample modules
            if (data.all_modules && data.all_modules.length > 0) {
                allModules = data.all_modules;
                displayModuleList(data.all_modules); // Show all modules
            }
            
            // Show results section
            resultsSection.style.display = 'block';
        }

        function displayModuleList(modules) {
            modulesList.innerHTML = '';
            modules.forEach(module => {
                const moduleItem = document.createElement('div');
                moduleItem.className = 'module-item';
                moduleItem.innerHTML = `
                    <div class="module-name">${module.filename}</div>
                `;
                modulesList.appendChild(moduleItem);
            });
        }

        function downloadAll() {
            showNotification('Tüm modüller ZIP olarak indiriliyor...', 'info');
            
            // Show download status after a delay
            setTimeout(() => {
                downloadStatus.style.display = 'flex';
            }, 2000);
            
            // Trigger download
            window.location.href = '/download_modules';
        }

        function resetProcess() {
            // Reset everything to initial state
            uploadedFile = null;
            fileInfo.style.display = 'none';
            convertBtn.disabled = true;
            resultsSection.style.display = 'none';
            downloadStatus.style.display = 'none';
            
            // Clear file input
            if (fileInput) {
                fileInput.value = '';
            }
            
            showNotification('Yeni PDF yükleyebilirsiniz', 'info');
        }

        function showSampleXML() {
            // Show sample XML in a modal or alert
            const sampleXML = `<?xml version="1.0" encoding="UTF-8"?>
<dm>
  <ident>
    <dmCode infoCode="DMC-GN016"/>
    <issueInfo issueNumber="001" inWork="2024-01-15"/>
  </ident>
  <content>
    <description>
      <title>F-16 Sistem Modülü Örneği</title>
      <para>Bu örnek XML dosyası S1000D standardına uygun olarak oluşturulmuştur.</para>
    </description>
  </content>
</dm>`;
            
            // Create modal
            const modal = document.createElement('div');
            modal.className = 'xml-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Örnek XML Dosyası</h3>
                        <button class="modal-close" onclick="closeModal()">×</button>
                    </div>
                    <div class="modal-body">
                        <pre>${sampleXML}</pre>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closeModal()">Kapat</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            modal.style.display = 'flex';
        }

        function closeModal() {
            const modal = document.querySelector('.xml-modal');
            if (modal) {
                modal.remove();
            }
        }

        // File Handling Functions
        function handleFile(file) {
            // Dosya tipini kontrol et (daha esnek validasyon)
            const fileName = file.name.toLowerCase();
            const fileType = file.type.toLowerCase();
            
            // PDF kontrolü - uzantı, MIME type veya boş type (Windows'ta sık karşılaşılan durum)
            const isPdf = fileName.endsWith('.pdf') || 
                         fileType === 'application/pdf' || 
                         fileType === '' ||
                         fileType.includes('pdf') ||
                         fileType === 'text/html'; // Windows bazen PDF'leri HTML olarak tanır
            
            if (!isPdf) {
                showNotification('Lütfen PDF dosyası seçin. Dosya tipi: ' + fileType, 'error');
                return;
            }

            if (file.size > 16 * 1024 * 1024) {
                showNotification('Dosya boyutu 16MB\'dan büyük olamaz!', 'error');
                return;
            }

            uploadedFile = file;
            displayFileInfo(file);
            convertBtn.disabled = false;
            
            // Başarılı yükleme bildirimi
            showNotification(`PDF dosyası seçildi: ${file.name}`, 'success');
        }

        function displayFileInfo(file) {
            fileName.textContent = file.name;
            fileInfo.style.display = 'flex';
            
            // Upload buton metnini değiştir
            const uploadBtnText = document.getElementById('uploadBtnText');
            if (uploadBtnText) {
                uploadBtnText.textContent = 'Dosya Değiştir';
            }
        }

        function removeFile() {
            uploadedFile = null;
            fileInfo.style.display = 'none';
            convertBtn.disabled = true;
            resultsSection.style.display = 'none';
            downloadStatus.style.display = 'none';
            
            // Upload buton metnini geri değiştir
            const uploadBtnText = document.getElementById('uploadBtnText');
            if (uploadBtnText) {
                uploadBtnText.textContent = 'PDF Yükle';
            }
        }

        // File Selection Functions
        function selectFile() {
            // Mevcut input'u kullan, yeni oluşturma
            const input = document.getElementById('fileInput');
            if (input) {
                input.click();
            } else {
                console.error('File input not found!');
            }
        }

        // Utility Functions
        function showLoading() {
            loadingOverlay.style.display = 'flex';
            
            // Simulate progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress > 100) progress = 100;
                progressFill.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 300);
        }

        function hideLoading() {
            loadingOverlay.style.display = 'none';
            progressFill.style.width = '0%';
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
                    const iconSvg = type === 'error' ? 
                        `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/></svg>` :
                        type === 'success' ?
                        `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.7088 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2458 3.61096 17.4371C2.43727 15.6283 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>` :
                        `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/><path d="M12 16V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;
                    
                    notification.innerHTML = `
                        <div class="notification-content">
                            <span class="notification-icon">${iconSvg}</span>
                            <span class="notification-message">${message}</span>
                        </div>
                    `;
            
            // Add to body
            document.body.appendChild(notification);
            
            // Show notification
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Event Listeners moved to DOMContentLoaded
        

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements initialization
            uploadArea = document.getElementById('uploadArea');
            fileInput = document.getElementById('fileInput');
            fileInfo = document.getElementById('fileInfo');
            fileName = document.getElementById('fileName');
            convertBtn = document.getElementById('convertBtn');
            resultsSection = document.getElementById('resultsSection');
            moduleCount = document.getElementById('moduleCount');
            modulesList = document.getElementById('modulesList');
            downloadStatus = document.getElementById('downloadStatus');
            loadingOverlay = document.getElementById('loadingOverlay');
            progressFill = document.getElementById('progressFill');
            
            // Event Listeners
            if (uploadArea) {
                uploadArea.addEventListener('click', (e) => {
                    selectFile();
                });
                
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });
                
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        handleFile(files[0]);
                    }
                });
            }
            
            // File input change event
            if (fileInput) {
                fileInput.addEventListener('change', function(e) {
                    if (e.target.files && e.target.files.length > 0) {
                        handleFile(e.target.files[0]);
                    }
                });
            }
        });
    </script>
</body>
</html>
